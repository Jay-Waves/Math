JPEG2000:
- 余弦变换 -> 小波变换
- 哈夫曼编码 -> 自适应算术编码
- 效率比JPEG提高30%

|      | 图像增强                               | 图像复原     |
| ---- | -------------------------------------- | ------------ |
| 思想 | 1.不考虑降质原因<br>2.不一定逼近原图像 |              |
| 目的 | 可懂度                                 | 保真度       |
| 方法 |                                        | 线性滤波复原 |

## 图像增强

### 1 灰度修正

曝光度 (灰度值偏大)

灰度变换

**直方图修正** ==必考==

### 2 同态增晰

动态范围很大的图像, 黑的很黑, 白的很白.

同态滤波: f -> `ln` -> `FFT` -> `H` -> `IFFT` -> `exp` ->

减少低频, 增强高频

### 3 图像平滑

处理噪声: 
- 胡椒噪声 (Pepper Noise): $\approx 0$, 粒状
- 盐噪声 (Salt Noise): $\approx 255$, 粒状. 椒盐噪声也称脉冲噪声.
- 高斯噪声: 

**图像平均**:
- 空间域平均
- 频率域平均

图像平均时, 噪声越少, 可能导致图像越模糊.

**低通滤波** (噪声能量集中在高频段): 振铃效应

**中值滤波** 窗口长度(滤波长度)

### 4 图像锐化

详见 [图像锐化](图像锐化.md)

### 5 几何校正

假设 $f(\alpha, \beta)$ 是几何畸变图像, $g(x,y)$ 是校正后的图像. 即 $g(x,y)$ 通过 $h_{1},h_{2}$ 线性变换为 $f(\alpha, \beta)$.

$$\begin{cases}
\alpha \leftarrow h_{1}(x,y) \\
\beta \leftarrow h_{2}(x,y)
\end{cases}$$

如果 $(\alpha, \beta)$ 不是整数:
- 临近点插值: 找离 $(\alpha,\beta)$ 最近的点作为校正后 $f(x,y)$ 值
- 双线性插值: 将所在网格的四个边界点加权平均作为校正后 $f(x,y)$ 值. 可以理解为先对x方向平均, 再对y方向平均.

$h_{1},h_{2}$ 通常通过线程方程求解, 如假设 $h_{1}=ax+by+c$

### 6 伪彩色图像增强

- 强度分层
- 灰度级-彩色变换
- 全彩色图像增强
	- RGB转换到HSI上, 然后直方图均衡 (对各个分量分别处理)
	- 深度学习上色 (直接对彩色像素处理)

## 图像复原

图像降质与复原模型:

$f(x,y)$ -> 退化函数H -> 添加噪声 $\eta(x,y)$ -> $g(x,y)$ -> 复原滤波 -> $\hat{f}(x,y)$

即 $g=H[f]+\eta\rightarrow g(x,y)=h*f+\eta\rightarrow G(u,v)=H\cdot F+N$

### 1 逆滤波

$$H(u,v)\cdot F(u, v)=G(u,v)$$

$$\hat{f}(x,y)=F^{-1}\left[\frac{G(u,v)}{H(u,v)}\right]$$

带噪声:

$$G(u,v)=H(u,v)\cdot F(u,v)+N(u,v)$$

$$\hat{F}=\frac{F(u,v)\cdot H(u,v)+N(u,v)}{H(u,v)}=F(u,v)+\frac{N(u,v)}{H(u,v)}$$

逆滤波对噪声非常敏感! 因为退化函数H使图像模糊, 就是使图像高频段变小使其丢失细节, 即H变换核高频段处会很小, 此时会对噪声有放大作用: $\frac{N(u,v)}{H(u,v)}$. 使用逆滤波, 须先低通滤波去噪.

### 2 维纳滤波

维纳滤波使最小均方误差接近最小: $$e^{2}=E\{[\hat{f}(x,y)-f(x,y)]^{2}\}$$

若噪声与图像不相关:
$$\begin{align}
& \hat{F}(u,v)  \\
&= \left[ \frac{H^{*}(u,v)}{\vert H(u,v)\vert^{2}+\gamma[S_{n}(u,v)/S_{f}(u,v)]} \right]\cdot G(u,v) \\
&= \left[\frac{1}{H(u,v)}\cdot \frac{\vert H(u,v)\vert ^2}{\vert H(u,v)\vert^{2}+\gamma[S_{n}(u,v)/S_{f}(u,v)]} \right]\cdot G(u,v)
\end{align}$$

其中 $S_{n}(u,v)$ 使噪声的功率谱, $S_{f}(u,v)$ 是图像的功率谱.

- 无噪声时, $S_{n}(u,v)$, 退化为逆滤波.
- 有噪声时, 一般假定为白噪声, 此时功率谱为常量, 一般由实验确定:

$$\hat{F}(u,v)=\left[ \frac{\overline{H}(u,v)}{\vert H(u,v)\vert^{2}+K} \right]\cdot G(u,v)$$

其中 $\overline{H}$ 是 $H$ 的共轭, $\overline{H}=\vert H\vert^{2}/H$

### 3 运动降质模型

运动降质模型通常用于模拟图像由于相机运动活物体运动而产生的模糊效果, 其频域公式实际是由时域一个向量位移(length+angle)变换而来的:

$$H(u,v)=\frac{T}{\eta}\cdot sin(\eta)e^{-j\eta},\ \eta=\pi \cdot (ua+vb)$$

其中 a 和 b 表示运动的方向和长度, T 是曝光时间的长度. u 和 v 是频域坐标.



